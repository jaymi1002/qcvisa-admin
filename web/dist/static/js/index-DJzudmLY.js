var xt=Object.defineProperty,yt=Object.defineProperties;var gt=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var Dt=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable;var H=(d,l,o)=>l in d?xt(d,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[l]=o,J=(d,l)=>{for(var o in l||(l={}))Dt.call(l,o)&&H(d,o,l[o]);if(P)for(var o of P(l))Ot.call(l,o)&&H(d,o,l[o]);return d},K=(d,l)=>yt(d,gt(l));var L=(d,l,o)=>new Promise((k,_)=>{var v=u=>{try{x(o.next(u))}catch(Y){_(Y)}},D=u=>{try{x(o.throw(u))}catch(Y){_(Y)}},x=u=>u.done?k(u.value):Promise.resolve(u.value).then(v,D);x((o=o.apply(d,l)).next())});import{d as h,i as E,c as S,f as O,o as y,w as e,aH as bt,e as t,aB as wt,x as i,t as w,aI as kt,_ as z,h as g,a as X,F as Ct,aJ as Z,s as b,aK as tt,S as et,aL as at,aM as ot,aN as st,B as lt,aO as it,aP as nt,aQ as Yt,a3 as C,u as rt,P as dt,M as Mt,b as Q,aR as Nt,aS as It}from"./index-CJz4BgrR.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{h as N}from"./moment-DFa0WlA5.js";import{u as ut}from"./loading-4tGW1hJz.js";import{g as $,d as Lt,c as St,u as W}from"./index-BQgxxVUb.js";import{O as Bt}from"./order-BSUGdHsP.js";/* empty css              *//* empty css              */const Gt=h({__name:"banner",setup(d){const l=E(),o=S(()=>({username:l.username}));return(k,_)=>{const v=wt,D=bt,x=kt;return y(),O(D,{class:"banner"},{default:e(()=>[t(D,{span:8},{default:e(()=>[t(v,{heading:5,style:{"margin-top":"0"}},{default:e(()=>[i(w(k.$t("workplace.welcome"))+" "+w(o.value.username),1)]),_:1})]),_:1}),t(x,{class:"panel-border"})]),_:1})}}}),Vt=z(Gt,[["__scopeId","data-v-edf9fcb6"]]),pt=d=>{switch(d){case"TODO":return"待处理";case"DOING":return"处理中";case"DONE":default:return"已完成"}},$t=h({__name:"saler-order-list",setup(d){window.moment=N;const l=E(),o=S(()=>({username:l.username})),k=S(()=>l.username),_=rt();dt();const v=g("MY"),{loading:D,setLoading:x}=ut(),u=g(),Y=g(),I=g(!1),U=g(!0),B=g(),p=c=>L(this,null,function*(){try{if(x(!0),c==="ALL"){const{data:a}=yield $();u.value=a,console.log(u.value)}if(c==="MY"){const{data:a}=yield $({creator:o.value.username});u.value=a}}catch(a){}finally{x(!1)}}),s=c=>{p(c)};p(v.value);const G=c=>{_.push({path:"/dashboard/order",query:{id:c.id,isView:"true"}})},q=c=>{_.push({path:"/dashboard/order",query:{id:c.id}})},F=c=>{Lt(c.id).then(()=>{p(v.value)})},r=()=>{Y.value={},I.value=!0,U.value=!1},V=()=>{const c=B.value.getFormData();St(c).then(()=>{Mt.success("创建成功"),p(v.value)})},T=()=>L(this,null,function*(){var a;return!(yield(a=B.value)==null?void 0:a.validate())});return(c,a)=>{const R=st,n=ot,M=lt,ct=at,f=nt,j=et,_t=it,mt=tt,ft=Z,vt=Yt;return y(),X(Ct,null,[t(ft,{loading:b(D),style:{width:"100%"}},{default:e(()=>[t(mt,{class:"general-card","header-style":{paddingBottom:"0px"},"body-style":{padding:"17px 20px 21px 20px"}},{title:e(()=>a[2]||(a[2]=[i(" 订单创建 ")])),extra:e(()=>a[3]||(a[3]=[])),default:e(()=>[t(j,{direction:"vertical",size:10,fill:""},{default:e(()=>[t(ct,{justify:"space-between"},{default:e(()=>[t(n,{"model-value":v.value,"onUpdate:modelValue":a[0]||(a[0]=m=>v.value=m),type:"button",onChange:s},{default:e(()=>[t(R,{value:"ALL"},{default:e(()=>a[4]||(a[4]=[i(" 全部 ")])),_:1}),t(R,{value:"MY"},{default:e(()=>a[5]||(a[5]=[i(" 我创建的 ")])),_:1})]),_:1},8,["model-value"]),t(M,{type:"primary",onClick:r},{default:e(()=>a[6]||(a[6]=[i("创建")])),_:1})]),_:1}),t(_t,{data:u.value,pagination:!0,bordered:!1,size:"small",scroll:{x:"140%"}},{columns:e(()=>[t(f,{ellipsis:"",tooltip:"",fixed:"left",title:"订单编号","data-index":"orderCode"}),t(f,{ellipsis:"",tooltip:"",title:"标题","data-index":"title"}),t(f,{ellipsis:"",tooltip:"",title:"登记日期","data-index":"registrationDate"},{cell:e(({record:m})=>[i(w(b(N)(m.registrationDate).format("YYYY-MM-DD")),1)]),_:1}),t(f,{ellipsis:"",tooltip:"",title:"客户名称","data-index":"customer"}),t(f,{ellipsis:"",tooltip:"",title:"办理国家","data-index":"country"}),t(f,{ellipsis:"",tooltip:"",title:"办理类型","data-index":"type"}),t(f,{ellipsis:"",tooltip:"",title:"签单金额","data-index":"orderMoney"}),t(f,{ellipsis:"",tooltip:"",title:"到账金额","data-index":"receivedMoney"}),t(f,{ellipsis:"",tooltip:"",title:"咨询老师","data-index":"creator"}),t(f,{ellipsis:"",tooltip:"",title:"办理状态","data-index":"status"},{cell:e(({record:m})=>[i(w(b(pt)(m.status)),1)]),_:1}),t(f,{ellipsis:"",tooltip:"",title:"操作费","data-index":"operateMoney"}),t(f,{ellipsis:"",tooltip:"",title:"登记月份","data-index":"registrationDate"},{cell:e(({record:m})=>[i(w(b(N)(m.registrationDate).format("YYYY-MM")),1)]),_:1}),t(f,{ellipsis:"",tooltip:"",title:"备注","data-index":"comment"}),t(f,{title:"操作",width:"220",fixed:"right","data-index":"operator"},{cell:e(({record:m})=>[t(j,null,{default:e(()=>[t(M,{type:"text",onClick:A=>G(m)},{default:e(()=>a[7]||(a[7]=[i("查看")])),_:2},1032,["onClick"]),t(M,{disabled:k.value!==m.creator,type:"text",onClick:A=>q(m)},{default:e(()=>a[8]||(a[8]=[i("编辑")])),_:2},1032,["disabled","onClick"]),t(M,{disabled:k.value!==m.creator,type:"text",status:"danger",onClick:A=>F(m)},{default:e(()=>a[9]||(a[9]=[i("删除")])),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1},8,["loading"]),t(vt,{visible:I.value,"onUpdate:visible":a[1]||(a[1]=m=>I.value=m),onOk:V,onCancel:c.handleCancel,"on-before-ok":T,width:"1000px"},{title:e(()=>a[10]||(a[10]=[i(" 创建订单 ")])),default:e(()=>[I.value?(y(),O(Bt,{key:0,ref_key:"orderRef",ref:B,isView:!1,scene:"create"},null,512)):C("",!0)]),_:1},8,["visible","onCancel"])],64)}}}),Tt=z($t,[["__scopeId","data-v-3ee56f5d"]]),Rt=h({__name:"writer-order-list",setup(d){const l=E(),o=S(()=>({username:l.username}));S(()=>l.username);const k=rt();dt();const _=g("DOING"),{loading:v,setLoading:D}=ut(),x=g();g(),g(!1),g(!0),g();const u=p=>L(this,null,function*(){try{if(D(!0),p==="TODO"){const{data:s}=yield $({status:"TODO"});x.value=s}if(p==="DOING"){const{data:s}=yield $({status:"DOING",recipient:o.value.username});x.value=s}if(p==="DONE"){const{data:s}=yield $({status:"DONE",recipient:o.value.username});x.value=s}}catch(s){}finally{D(!1)}}),Y=p=>{u(p)};u(_.value);const I=p=>{k.push({path:"/dashboard/order",query:{id:p.id,isView:"true"}})},U=p=>L(this,null,function*(){yield W(p.id,{status:"DOING"}),u(_.value)}),B=p=>L(this,null,function*(){yield W(p.id,{status:"DONE"}),u(_.value)});return(p,s)=>{const G=st,q=ot,F=at,r=nt,V=lt,T=et,c=it,a=tt,R=Z;return y(),O(R,{loading:b(v),style:{width:"100%"}},{default:e(()=>[t(a,{class:"general-card","header-style":{paddingBottom:"0"},"body-style":{padding:"17px 20px 21px 20px"}},{title:e(()=>s[1]||(s[1]=[i(" 订单认领 ")])),extra:e(()=>s[2]||(s[2]=[])),default:e(()=>[t(T,{direction:"vertical",size:10,fill:""},{default:e(()=>[t(F,{justify:"space-between"},{default:e(()=>[t(q,{"model-value":_.value,"onUpdate:modelValue":s[0]||(s[0]=n=>_.value=n),type:"button",onChange:Y},{default:e(()=>[t(G,{value:"TODO"},{default:e(()=>s[3]||(s[3]=[i(" 待认领 ")])),_:1}),t(G,{value:"DOING"},{default:e(()=>s[4]||(s[4]=[i(" 我认领的 ")])),_:1}),t(G,{value:"DONE"},{default:e(()=>s[5]||(s[5]=[i(" 已完成 ")])),_:1})]),_:1},8,["model-value"])]),_:1}),t(c,{data:x.value,pagination:!0,bordered:!1,size:"small",scroll:{x:"140%"}},{columns:e(()=>[t(r,{ellipsis:"",tooltip:"",fixed:"left",title:"订单编号","data-index":"orderCode"}),t(r,{ellipsis:"",tooltip:"",title:"标题","data-index":"title"}),_.value==="TODO"?(y(),O(r,{key:0,ellipsis:"",tooltip:"",title:"登记日期","data-index":"registrationDate"},{cell:e(({record:n})=>[i(w(b(N)(n.registrationDate).format("YYYY-MM-DD")),1)]),_:1})):C("",!0),_.value==="DOING"?(y(),O(r,{key:1,ellipsis:"",tooltip:"",title:"认领日期","data-index":"recipientDate"},{cell:e(({record:n})=>[i(w(n.recipientDate&&b(N)(n.recipientDate).format("YYYY-MM-DD")),1)]),_:1})):C("",!0),_.value==="DONE"?(y(),O(r,{key:2,ellipsis:"",tooltip:"",title:"认领日期","data-index":"completeDate"},{cell:e(({record:n})=>[i(w(n.completeDate&&b(N)(n.completeDate).format("YYYY-MM-DD")),1)]),_:1})):C("",!0),t(r,{ellipsis:"",tooltip:"",title:"客户名称","data-index":"customer"}),t(r,{ellipsis:"",tooltip:"",title:"办理国家","data-index":"country"}),t(r,{ellipsis:"",tooltip:"",title:"办理类型","data-index":"type"}),t(r,{ellipsis:"",tooltip:"",title:"签单金额","data-index":"orderMoney"}),t(r,{ellipsis:"",tooltip:"",title:"到账金额","data-index":"receivedMoney"}),t(r,{ellipsis:"",tooltip:"",title:"咨询老师","data-index":"creator"}),t(r,{ellipsis:"",tooltip:"",title:"办理状态","data-index":"status"},{cell:e(({record:n})=>[i(w(b(pt)(n.status)),1)]),_:1}),t(r,{ellipsis:"",tooltip:"",title:"操作费","data-index":"operateMoney"}),t(r,{ellipsis:"",tooltip:"",title:"登记月份","data-index":"registrationDate"},{cell:e(({record:n})=>[i(w(b(N)(n.registrationDate).format("YYYY-MM")),1)]),_:1}),t(r,{ellipsis:"",tooltip:"",title:"备注","data-index":"comment"}),t(r,{title:"操作",width:"220",fixed:"right","data-index":"operator"},{cell:e(({record:n})=>[t(T,null,{default:e(()=>[t(V,{type:"text",onClick:M=>I(n)},{default:e(()=>s[6]||(s[6]=[i("查看")])),_:2},1032,["onClick"]),n.status==="TODO"?(y(),O(V,{key:0,type:"text",status:"danger",onClick:M=>U(n)},{default:e(()=>s[7]||(s[7]=[i("认领")])),_:2},1032,["onClick"])):C("",!0),n.status==="DOING"?(y(),O(V,{key:1,type:"text",status:"danger",onClick:M=>B(n)},{default:e(()=>s[8]||(s[8]=[i("完成")])),_:2},1032,["onClick"])):C("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1},8,["loading"])}}}),ht=z(Rt,[["__scopeId","data-v-9b8d227e"]]),Et={class:"container"},zt={class:"left-side"},Ut={class:"panel"},qt={name:"Dashboard"},Ft=h(K(J({},qt),{setup(d){const l=E(),o=S(()=>l.role);return(k,_)=>{const v=It,D=Nt;return y(),X("div",Et,[Q("div",zt,[Q("div",Ut,[t(Vt)]),t(D,{cols:24,"col-gap":16,"row-gap":16,style:{"margin-top":"16px"}},{default:e(()=>[t(v,{span:24},{default:e(()=>[o.value==="saler"||o.value==="admin"?(y(),O(Tt,{key:0})):C("",!0),o.value==="writer"||o.value==="admin"?(y(),O(ht,{key:1})):C("",!0)]),_:1})]),_:1})])])}}})),ie=z(Ft,[["__scopeId","data-v-f5b8c92f"]]);export{ie as default};
