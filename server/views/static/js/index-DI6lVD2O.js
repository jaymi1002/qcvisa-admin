var D=Object.defineProperty,N=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var b=(a,t,e)=>t in a?D(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,m=(a,t)=>{for(var e in t||(t={}))E.call(t,e)&&b(a,e,t[e]);if(C)for(var e of C(t))L.call(t,e)&&b(a,e,t[e]);return a},p=(a,t)=>N(a,R(t));var f=(a,t,e)=>new Promise((i,n)=>{var c=r=>{try{s(e.next(r))}catch(u){n(u)}},w=r=>{try{s(e.throw(r))}catch(u){n(u)}},s=r=>r.done?i(r.value):Promise.resolve(r.value).then(c,w);s((e=e.apply(a,t)).next())});import{d as z,i as A,h as B,c as V,a as F,o as y,e as v,b as I,z as P,w as k,S as T,P as U,f as q,a3 as j,x,B as G,s as H,u as J,_ as K}from"./index-CJz4BgrR.js";/* empty css              */import{u as M}from"./loading-4tGW1hJz.js";import{a as Q,b as W}from"./index-BQgxxVUb.js";import{O as X}from"./order-BSUGdHsP.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */const Y={class:"container"},Z={class:"actions"},$={name:"Order"},ee=z(p(m({},$),{setup(a){const t=J(),e=U(),i=A(),n=B({creator:i.username,orderCode:""}),c=V(()=>n.value.creator===i.username);f(this,null,function*(){const{id:d}=e.query;d&&Q(d).then(({data:o})=>{n.value=o})});const s=V(()=>e.query.isView==="true"),r=B(),{loading:u,setLoading:g}=M(),O=()=>f(this,null,function*(){var o;(yield(o=r.value)==null?void 0:o.validate())||g(!0);try{const{id:_}=e.query,l=r.value.getFormData();yield W(_,l),t.replace({query:p(m({},e.query),{isView:"true"})})}finally{g(!1)}}),h=()=>{t.replace({query:p(m({},e.query),{isView:"false"})})};return(d,o)=>{const _=P("Breadcrumb"),l=G,S=T;return y(),F("div",Y,[v(_,{items:["menu.dashboard",s.value?"订单查看":"订单修改"]},null,8,["items"]),v(X,{ref_key:"formRef",ref:r,"order-data":n.value,"is-view":s.value},null,8,["order-data","is-view"]),I("div",Z,[v(S,null,{default:k(()=>[s.value&&c.value?(y(),q(l,{key:0,type:"primary",onClick:h},{default:k(()=>o[0]||(o[0]=[x(" 修改 ")])),_:1})):c.value?(y(),q(l,{key:1,type:"primary",loading:H(u),onClick:O},{default:k(()=>o[1]||(o[1]=[x(" 提交 ")])),_:1},8,["loading"])):j("",!0)]),_:1})])])}}})),me=K(ee,[["__scopeId","data-v-0eec2b1e"]]);export{me as default};
